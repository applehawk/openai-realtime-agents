# Agent Separation (v2.0) - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**–î–∞—Ç–∞:** 2025-10-24  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Implemented

## –ö—Ä–∞—Ç–∫–æ–µ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

–†–∞–∑–¥–µ–ª–∏–ª–∏ –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π `supervisorAgent` –Ω–∞ –¥–≤–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–∞:

1. **DecisionAgent** - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ!)
2. **ExecutorAgent** - –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–¶–µ–ª—å:** –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â—É—é –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∑–∞–¥–∞—á –∏ —Ä–∞–∑–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã.

## –ü—Ä–æ–±–ª–µ–º–∞

### –î–æ v2.0

`supervisorAgent` –±—ã–ª –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –ª–æ–≥–∏–∫–æ–π:
- –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –æ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á (approve)
- –†–µ—à–µ–Ω–∏–µ –æ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå –ü—Ä–æ–º–ø—Ç –±—ã–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (>560 —Å—Ç—Ä–æ–∫)
- ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ñ–æ–∫—É—Å –Ω–∞ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
- ‚ùå –°–º–µ—à–∞–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å (decision-making + execution)
- ‚ùå –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ (–¥–æ—Ä–æ–≥–æ!)

### –ü–æ—á–µ–º—É –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –¥–æ—Ä–æ–≥–∞—è?

–ö–∞–∂–¥–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è = –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ LLM –≤—ã–∑–æ–≤—ã:
1. –í—ã–∑–æ–≤ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –æ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
2. –°–æ–∑–¥–∞–Ω–∏–µ N –ø–æ–¥–∑–∞–¥–∞—á
3. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–¥–∑–∞–¥–∞—á–∏
4. –í—ã–∑–æ–≤—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –ø–æ–¥–∑–∞–¥–∞—á–∏
5. –í—ã–∑–æ–≤ –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:** –ó–∞–¥–∞—á–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 5 –ø–æ–¥–∑–∞–¥–∞—á ‚Üí –º–∏–Ω–∏–º—É–º 11 LLM –≤—ã–∑–æ–≤–æ–≤ –≤–º–µ—Å—Ç–æ 1!

## –†–µ—à–µ–Ω–∏–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v2.0

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              IntelligentSupervisor                      ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  1. Assess Complexity (simple/medium/complex)           ‚îÇ
‚îÇ  2. Select Strategy (direct/flat/hierarchical)          ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ  ‚îÇ DecisionAgent ‚îÇ  ‚îÇ ExecutorAgent ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ  ‚îÇ               ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ "Should we    ‚îÇ  ‚îÇ "Execute task ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ  breakdown?"  ‚îÇ  ‚îÇ  or aggregate"‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ  ‚îÇ               ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ Default: NO!  ‚îÇ  ‚îÇ With context  ‚îÇ                  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  OLD: supervisorAgent (legacy, backward compatibility) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¢—Ä–∏ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ê–≥–µ–Ω—Ç–∞

#### 1. DecisionAgent (–ù–æ–≤—ã–π!)

**–†–æ–ª—å:** –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

**–§–∏–ª–æ—Å–æ—Ñ–∏—è:** "Default to NO" ‚Äî –≥–æ–≤–æ—Ä–∏—Ç "–ù–ï–¢" –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –≤ 95% —Å–ª—É—á–∞–µ–≤

**–ü—Ä–æ–º–ø—Ç —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞:**
- ‚ùå **–ù–ï –†–ê–ó–ë–ò–í–ê–¢–¨** –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–¥–∞—á (1-3 —à–∞–≥–∞)
- ‚úÖ **–†–ê–ó–ë–ò–í–ê–¢–¨** —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–µ (5+ –æ–ø–µ—Ä–∞—Ü–∏–π)
- ü§î –°–µ—Ä—ã–µ –∑–æ–Ω—ã ‚Üí —Å–∫–ª–æ–Ω—è–µ—Ç—Å—è –∫ –ù–ï —Ä–∞–∑–±–∏–≤–∞—Ç—å

**–ü—Ä–∏–º–µ—Ä—ã —Ä–µ—à–µ–Ω–∏–π:**

```json
// –¢–∏–ø–∏—á–Ω—ã–π —Å–ª—É—á–∞–π (95% –∑–∞–¥–∞—á)
{
  "shouldBreakdown": false,
  "reasoning": "–ó–∞–¥–∞—á–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 2 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–æ–≤, –∞–≥–µ–Ω—Ç —Å–ø—Ä–∞–≤–∏—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é",
  "directExecution": {
    "canExecuteDirectly": true,
    "executor": "supervisor"
  }
}

// –†–µ–¥–∫–∏–π —Å–ª—É—á–∞–π (5% –∑–∞–¥–∞—á)
{
  "shouldBreakdown": true,
  "reasoning": "–ó–∞–¥–∞—á–∞ —Ç—Ä–µ–±—É–µ—Ç 5+ –æ–ø–µ—Ä–∞—Ü–∏–π: –Ω–∞–π—Ç–∏ 50 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ...",
  "subtasks": [...]
}
```

#### 2. ExecutorAgent (–ù–æ–≤—ã–π!)

**–†–æ–ª—å:** –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:**

**–†–µ–∂–∏–º 1: Direct Execution (–Ω–µ—Ç subtaskResults)**
```javascript
// –ó–∞–¥–∞—á–∞: "–ü—Ä–æ—á–∏—Ç–∞–π –ø–∏—Å—å–º–æ –æ—Ç –ê–Ω–Ω—ã"
// ExecutorAgent: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MCP tools, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∞–ø—Ä—è–º—É—é
{
  "status": "completed",
  "result": "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –ø–∏—Å—å–º–æ –æ—Ç –ê–Ω–Ω—ã –ø–æ–ª—É—á–µ–Ω–æ –≤—á–µ—Ä–∞...",
  "workflowSteps": ["–ü—Ä–æ—á–∏—Ç–∞–ª –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–∏—Å—å–º–æ –æ—Ç –ê–Ω–Ω—ã"]
}
```

**–†–µ–∂–∏–º 2: Aggregation (–µ—Å—Ç—å subtaskResults)**
```javascript
// –ó–∞–¥–∞—á–∞: "–ù–∞–π–¥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è"
// task.subtaskResults = ["–ù–∞–π–¥–µ–Ω–æ 5 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤", "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 5 –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π"]
// ExecutorAgent: —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
{
  "status": "completed",
  "result": "–ù–∞–π–¥–µ–Ω–æ 5 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: –ò–≤–∞–Ω–æ–≤, –ü–µ—Ç—Ä–æ–≤, –°–∏–¥–æ—Ä–æ–≤, –ö–æ–∑–ª–æ–≤, –ú–∏—Ö–∞–π–ª–æ–≤. –í—Å–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è...",
  "workflowSteps": ["–ù–∞–π–¥–µ–Ω—ã —É—á–∞—Å—Ç–Ω–∏–∫–∏", "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è", "–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω –∏—Ç–æ–≥"]
}
```

#### 3. supervisorAgent (Legacy)

**–°—Ç–∞—Ç—É—Å:** `@deprecated` - —Å–æ—Ö—Ä–∞–Ω—ë–Ω –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å—Ç–∞—Ä—ã—Ö workflow, –∫–æ—Ç–æ—Ä—ã–µ –µ—â—ë –Ω–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ö–æ–¥–µ

### 1. –ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã –≤ `src/app/api/supervisor/agent.ts`

```typescript
// –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–º–ø—Ç—ã –∏ –∞–≥–µ–Ω—Ç—ã

export const decisionAgentInstructions = `...`; // –§–æ–∫—É—Å –Ω–∞ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

export const executorAgentInstructions = `...`; // –§–æ–∫—É—Å –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

export const decisionAgent = new Agent({
  name: 'DecisionAgent',
  model: 'gpt-4o',
  instructions: decisionAgentInstructions,
  tools: [], // –ë–µ–∑ tools - —á–∏—Å—Ç–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π
});

export const executorAgent = new Agent({
  name: 'ExecutorAgent',
  model: 'gpt-4o',
  instructions: executorAgentInstructions,
  tools: [
    hostedMcpTool({
      serverLabel: 'calendar',
      serverUrl: 'https://rndaibot.app.n8n.cloud/mcp/google_my_account',
    }),
  ],
});
```

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã DecisionAgent:**

```
1. **Default to NO**: –ù–∞—á–∏–Ω–∞–µ–º —Å –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è —á—Ç–æ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ù–ï –Ω—É–∂–Ω–∞
2. **Context is King**: –ï—Å–ª–∏ previousResults —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë!
3. **Agent is Smart**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ LLM —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å multi-step –ª–æ–≥–∏–∫–æ–π
4. **Cost Matters**: –ö–∞–∂–¥–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è = –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ LLM –≤—ã–∑–æ–≤—ã
5. **User Experience**: –ü—Ä–æ—Å—Ç–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ = –±—ã—Å—Ç—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `intelligentSupervisor.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

```typescript
// –î–æ v2.0
import { supervisorAgent } from '../agent';

// –ü–æ—Å–ª–µ v2.0
import { supervisorAgent, decisionAgent, executorAgent } from '../agent';
```

**–ú–µ—Ç–æ–¥ `breakdownTaskWithSupervisor` (–æ–±–Ω–æ–≤–ª—ë–Ω):**

```typescript
private async breakdownTaskWithSupervisor(
  request: TaskBreakdownRequest
): Promise<TaskBreakdownResponse> {
  const breakdownPrompt = `
üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è ‚Äî –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è! –ò—Å–ø–æ–ª—å–∑—É–π –µ—ë –¢–û–õ–¨–ö–û –í –ö–†–ê–ô–ù–ï–ú –°–õ–£–ß–ê–ï! üö®

**–ü–†–ê–í–ò–õ–û –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ: –ù–ï –†–ê–ó–ë–ò–í–ê–¢–¨!**

‚ùå **–ù–ï –†–ê–ó–ë–ò–í–ê–ô** –µ—Å–ª–∏:
- –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ 1-3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞
- –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –µ—Å—Ç—å –∏–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –≤—ã–∑–æ–≤–æ–º
- –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ

‚úÖ **–†–ê–ó–ë–ò–í–ê–ô –¢–û–õ–¨–ö–û** –µ—Å–ª–∏:
- 5+ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö
- –°–ª–æ–∂–Ω–∞—è —É—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å –≤–µ—Ç–≤–ª–µ–Ω–∏—è–º–∏
- –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –±–æ–ª—å—à–æ–º—É –Ω–∞–±–æ—Ä—É –¥–∞–Ω–Ω—ã—Ö (20+ —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
  `;

  // NEW (v2.0): Use specialized DecisionAgent
  const result = await run(decisionAgent, breakdownPrompt);
  
  console.log('[IntelligentSupervisor] DecisionAgent decision:', {
    shouldBreakdown: decision.shouldBreakdown,
    reasoning: decision.reasoning,
  });
  
  return decision;
}
```

**–ú–µ—Ç–æ–¥ `executeSingleTaskWithAgent` (–æ–±–Ω–æ–≤–ª—ë–Ω):**

```typescript
private async executeSingleTaskWithAgent(
  request: TaskExecutionRequest
): Promise<TaskExecutionResponse> {
  console.log('[IntelligentSupervisor] Executing with ExecutorAgent:', {
    task: task.description,
    hasSubtaskResults: !!task.subtaskResults,
  });

  const executionPrompt = `
**Task to Execute:**
${task.description}

${task.subtaskResults ? `
**Subtask Results (aggregate these):**
${task.subtaskResults.map((r, i) => `${i + 1}. ${r}`).join('\n')}

Your job: Synthesize these subtask results into a comprehensive answer.
` : ''}
  `;

  // NEW (v2.0): Use specialized ExecutorAgent
  const result = await run(executorAgent, executionPrompt);
  
  console.log('[IntelligentSupervisor] ExecutorAgent completed:', {
    status: response.status,
    stepsCount: response.workflowSteps?.length || 0,
  });
  
  return response;
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ v2.0

### 1. –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

**–î–æ v2.0:**
- "–ü—Ä–æ—á–∏—Ç–∞–π –ø–∏—Å—å–º–æ –∏ –Ω–∞–∑–Ω–∞—á—å –≤—Å—Ç—Ä–µ—á—É" ‚Üí —Ä–∞–∑–±–∏–≤–∞–ª–æ—Å—å –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏ (–¥–æ—Ä–æ–≥–æ!)
- –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ

**–ü–æ—Å–ª–µ v2.0:**
- "–ü—Ä–æ—á–∏—Ç–∞–π –ø–∏—Å—å–º–æ –∏ –Ω–∞–∑–Ω–∞—á—å –≤—Å—Ç—Ä–µ—á—É" ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é (–±—ã—Å—Ç—Ä–æ!)
- DecisionAgent –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥–æ–≤–æ—Ä–∏—Ç "NO"

**–û–∂–∏–¥–∞–µ–º–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–π:** 70-80%

### 2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

| –ê–≥–µ–Ω—Ç | –†–æ–ª—å | Tools | –ü—Ä–æ–º–ø—Ç |
|-------|------|-------|--------|
| DecisionAgent | –†–µ—à–µ–Ω–∏–µ –æ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ | –ù–µ—Ç | –ö–æ—Ä–æ—Ç–∫–∏–π, —Ñ–æ–∫—É—Å –Ω–∞ "NO" |
| ExecutorAgent | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á | MCP | –°—Ä–µ–¥–Ω–∏–π, —Ñ–æ–∫—É—Å –Ω–∞ execution |
| supervisorAgent | Legacy | MCP | –î–ª–∏–Ω–Ω—ã–π (deprecated) |

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ú–µ—Ç—Ä–∏–∫–∏:**

```
–¢–∏–ø–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∞ (2-3 —à–∞–≥–∞):
  –î–æ v2.0: 5-7 LLM –≤—ã–∑–æ–≤–æ–≤ (–¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è)
  –ü–æ—Å–ª–µ v2.0: 1-2 LLM –≤—ã–∑–æ–≤–∞ (–ø—Ä—è–º–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
  
  –≠–∫–æ–Ω–æ–º–∏—è: ~70% LLM –≤—ã–∑–æ–≤–æ–≤
  –°–∫–æ—Ä–æ—Å—Ç—å: ~3x –±—ã—Å—Ç—Ä–µ–µ
```

**–°–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞ (5+ –æ–ø–µ—Ä–∞—Ü–∏–π):**

```
  –î–æ v2.0: –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –≤—Å–µ–≥–¥–∞
  –ü–æ—Å–ª–µ v2.0: –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–∞
  
  DecisionAgent —Ç—â–∞—Ç–µ–ª—å–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å
```

### 4. –õ—É—á—à–∞—è –û—Ç–ª–∞–¥–∫–∞

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```typescript
// DecisionAgent
[IntelligentSupervisor] DecisionAgent decision: {
  shouldBreakdown: false,
  reasoning: "–ó–∞–¥–∞—á–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 2 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–æ–≤...",
}

// ExecutorAgent
[IntelligentSupervisor] ExecutorAgent completed: {
  status: "completed",
  stepsCount: 2,
}
```

–¢–µ–ø–µ—Ä—å –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å:
- –ü–æ—á–µ–º—É –∑–∞–¥–∞—á–∞ –ù–ï –±—ã–ª–∞ —Ä–∞–∑–±–∏—Ç–∞
- –ö–∞–∫ ExecutorAgent –µ—ë –≤—ã–ø–æ–ª–Ω–∏–ª
- –°–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å

## –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞ (NO breakdown)

**–ó–∞–¥–∞—á–∞:** "–ü—Ä–æ—á–∏—Ç–∞–π –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–∏—Å—å–º–æ –æ—Ç –ê–Ω–Ω—ã"

**Flow:**
1. `IntelligentSupervisor.assessComplexity()` ‚Üí "simple"
2. `IntelligentSupervisor.selectStrategy()` ‚Üí "direct"
3. `IntelligentSupervisor.executeDirectly()` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `supervisorAgent` –Ω–∞–ø—Ä—è–º—É—é
4. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: 1 LLM –≤—ã–∑–æ–≤

**DecisionAgent –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è** (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è "direct" –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ)

### –ü—Ä–∏–º–µ—Ä 2: –°—Ä–µ–¥–Ω—è—è –∑–∞–¥–∞—á–∞ (NO breakdown)

**–ó–∞–¥–∞—á–∞:** "–ü—Ä–æ—á–∏—Ç–∞–π –ø–∏—Å—å–º–æ –æ—Ç –ê–Ω–Ω—ã –∏ –Ω–∞–∑–Ω–∞—á—å –≤—Å—Ç—Ä–µ—á—É –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è"

**Flow:**
1. `IntelligentSupervisor.assessComplexity()` ‚Üí "medium"
2. `IntelligentSupervisor.selectStrategy()` ‚Üí "hierarchical"
3. `TaskOrchestrator.executeTaskRecursively()`
4. ‚Üí `DecisionAgent.decide()` ‚Üí **shouldBreakdown: false**
5. ‚Üí `ExecutorAgent.execute()` ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É –Ω–∞–ø—Ä—è–º—É—é
6. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: 2 LLM –≤—ã–∑–æ–≤–∞ (DecisionAgent + ExecutorAgent)

**–≠–∫–æ–Ω–æ–º–∏—è:** –†–∞–Ω—å—à–µ –±—ã–ª–æ –±—ã 5-7 –≤—ã–∑–æ–≤–æ–≤ (breakdown –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏)

### –ü—Ä–∏–º–µ—Ä 3: –°–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞ (YES breakdown)

**–ó–∞–¥–∞—á–∞:** "–ù–∞–π–¥–∏ –≤—Å–µ—Ö 50 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –í–æ—Å—Ç–æ–∫, –ø—Ä–æ–≤–µ—Ä—å –∏—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∑–∞–≤—Ç—Ä–∞, –æ—Ç–ø—Ä–∞–≤—å –∫–∞–∂–¥–æ–º—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ"

**Flow:**
1. `IntelligentSupervisor.assessComplexity()` ‚Üí "complex"
2. `IntelligentSupervisor.selectStrategy()` ‚Üí "hierarchical"
3. `TaskOrchestrator.executeTaskRecursively()`
4. ‚Üí `DecisionAgent.decide()` ‚Üí **shouldBreakdown: true** (genuinely complex!)
5. ‚Üí –°–æ–∑–¥–∞—é—Ç—Å—è –ø–æ–¥–∑–∞–¥–∞—á–∏:
   - "–ù–∞–π—Ç–∏ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –í–æ—Å—Ç–æ–∫"
   - "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞"
   - "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è"
6. ‚Üí –ö–∞–∂–¥–∞—è –ø–æ–¥–∑–∞–¥–∞—á–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ:
   - `DecisionAgent` ‚Üí –≤–µ—Ä–æ—è—Ç–Ω–æ "NO" (—É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç—ã–µ)
   - `ExecutorAgent` ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç
7. ‚Üí Parent task: `ExecutorAgent.aggregate()` ‚Üí —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
8. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: 7-9 LLM –≤—ã–∑–æ–≤–æ–≤ (–º–∏–Ω–∏–º—É–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö)

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:** DecisionAgent –Ω–µ —Ä–∞–∑–±–∏–≤–∞–µ—Ç –ø–æ–¥–∑–∞–¥–∞—á–∏ –¥–∞–ª—å—à–µ (–æ–Ω–∏ —É–∂–µ –ø—Ä–æ—Å—Ç—ã–µ)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ (DecisionAgent)

### ‚ùå –ù–ï –†–ê–ó–ë–ò–í–ê–¢–¨ (95% –∑–∞–¥–∞—á)

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ü—Ä–∏–º–µ—Ä |
|----------|--------|
| 1-3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞ | "–ü—Ä–æ—á–∏—Ç–∞–π –ø–∏—Å—å–º–æ –∏ –Ω–∞–∑–Ω–∞—á—å –≤—Å—Ç—Ä–µ—á—É" |
| –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ | "–ù–∞–π–¥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –í–æ—Å—Ç–æ–∫" |
| –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ | "–ü—Ä–æ–≤–µ—Ä—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ —Å–∫–∞–∂–∏ –∫–æ–≥–¥–∞ —Å–≤–æ–±–æ–¥–Ω–æ" |
| –ï—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ previousResults | Subtask —É–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| –ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑/—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è | "–†–µ–∑—é–º–∏—Ä—É–π –ø–∏—Å—å–º–∞ –æ –ø—Ä–æ–µ–∫—Ç–µ" |

### ‚úÖ –†–ê–ó–ë–ò–í–ê–¢–¨ (5% –∑–∞–¥–∞—á)

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ü—Ä–∏–º–µ—Ä |
|----------|--------|
| 5+ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π | "–ù–∞–π–¥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ‚Üí –ø—Ä–æ–≤–µ—Ä—å –∫–∞–ª–µ–Ω–¥–∞—Ä–∏ ‚Üí –æ—Ç–ø—Ä–∞–≤—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è ‚Üí —Å–æ–∑–¥–∞–π —Å–æ–±—ã—Ç–∏–µ ‚Üí –æ—Ç–ø—Ä–∞–≤—å —Ä–µ–∑—é–º–µ" |
| –°–ª–æ–∂–Ω–∞—è —É—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ | "–ï—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ —Å–≤–æ–±–æ–¥–Ω–æ, –Ω–∞–∑–Ω–∞—á—å –≤—Å—Ç—Ä–µ—á—É, –µ—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–µ–¥–ª–æ–∂–∏ 3 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ —Å–ø—Ä–æ—Å–∏" |
| –ë–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö | "–ù–∞–π–¥–∏ 50 —á–µ–ª–æ–≤–µ–∫ –∏ –∫–∞–∂–¥–æ–º—É –æ—Ç–ø—Ä–∞–≤—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ" |
| –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è | Workflow —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ user confirmations |

### ü§î –°–µ—Ä—ã–µ –ó–æ–Ω—ã (—Å–∫–ª–æ–Ω—è–µ–º—Å—è –∫ –ù–ï —Ä–∞–∑–±–∏–≤–∞—Ç—å)

- "–ü—Ä–æ—á–∏—Ç–∞–π 5 –ø–∏—Å–µ–º –∏ —Ä–µ–∑—é–º–∏—Ä—É–π" ‚Üí ‚ùå NO (–º–∞–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- "–û—Ç–ø—Ä–∞–≤—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞–º" ‚Üí ‚ùå NO (–º–∞–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- "–ù–∞–π–¥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä—å –∏—Ö —Ä–æ–ª–∏" ‚Üí ‚ùå NO (2 —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —à–∞–≥–∞)
- "–ù–∞–π–¥–∏ 100 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤—å –∫–∞–∂–¥–æ–º—É" ‚Üí ‚úÖ YES (–±–æ–ª—å—à–æ–π –æ–±—ä—ë–º)

## –ú–∏–≥—Ä–∞—Ü–∏—è –°—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Workflow

### Backward Compatibility

**–°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:**

```typescript
// –≠—Ç–æ –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç supervisorAgent)
const report = await orchestrator.executeComplexTask(
  request.taskDescription,
  request.conversationContext,
  this.breakdownTaskWithSupervisor.bind(this), // –¢–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç decisionAgent
  this.executeSingleTaskWithAgent.bind(this),  // –¢–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç executorAgent
  this.generateReportWithSupervisor.bind(this)
);
```

**–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞**, –Ω–æ API –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º!

### –ù–æ–≤—ã–π –∫–æ–¥ –º–æ–∂–µ—Ç —è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

```typescript
import { decisionAgent, executorAgent } from './agent';

// –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DecisionAgent
const decision = await run(decisionAgent, decisionPrompt);

// –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ExecutorAgent
const result = await run(executorAgent, executionPrompt);
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

**–ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ (1-3 —à–∞–≥–∞):**
- ‚úÖ DecisionAgent ‚Üí shouldBreakdown: false
- ‚úÖ ExecutorAgent ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞ 1-2 LLM –≤—ã–∑–æ–≤–∞

**–°—Ä–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏ (3-5 —à–∞–≥–æ–≤):**
- ‚úÖ DecisionAgent ‚Üí shouldBreakdown: false (–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤)
- ‚úÖ ExecutorAgent ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞ 1-2 LLM –≤—ã–∑–æ–≤–∞

**–°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ (5+ –æ–ø–µ—Ä–∞—Ü–∏–π):**
- ‚úÖ DecisionAgent ‚Üí shouldBreakdown: true (–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ!)
- ‚úÖ –ü–æ–¥–∑–∞–¥–∞—á–∏ ‚Üí DecisionAgent —Å–Ω–æ–≤–∞ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç (–≤–µ—Ä–æ—è—Ç–Ω–æ NO –¥–ª—è –ø–æ–¥–∑–∞–¥–∞—á)
- ‚úÖ ExecutorAgent ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–∞–∂–¥—É—é –ø–æ–¥–∑–∞–¥–∞—á—É
- ‚úÖ ExecutorAgent ‚Üí –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è parent task

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```typescript
// –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –≤ IntelligentSupervisor

console.log('[IntelligentSupervisor] DecisionAgent decision:', {
  shouldBreakdown: decision.shouldBreakdown,
  reasoning: decision.reasoning,
  subtasksCount: decision.subtasks?.length || 0,
});

console.log('[IntelligentSupervisor] ExecutorAgent completed:', {
  status: response.status,
  stepsCount: response.workflowSteps?.length || 0,
});
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å:**
- –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–¥–∞—á —Å `shouldBreakdown: true` (–æ–∂–∏–¥–∞–µ–º <20%)
- –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ LLM –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ –∑–∞–¥–∞—á—É (–æ–∂–∏–¥–∞–µ–º —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 50-70%)
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á (–æ–∂–∏–¥–∞–µ–º —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 2-3x –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á)

## –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å DecisionAgent –∏ ExecutorAgent
2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ IntelligentSupervisor
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
5. ‚è≥ –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (breakdown rate, LLM call count)
6. ‚è≥ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π DecisionAgent –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–¥–∞—á
7. ‚è≥ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: fine-tune –º–æ–¥–µ–ª—å –¥–ª—è DecisionAgent (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**v2.0 –¥–æ—Å—Ç–∏–≥–∞–µ—Ç:**

‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç –æ–¥–Ω—É —á—ë—Ç–∫—É—é —Ä–æ–ª—å  
‚úÖ **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏** - DecisionAgent –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥–æ–≤–æ—Ä–∏—Ç "NO"  
‚úÖ **–õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - 50-70% –º–µ–Ω—å—à–µ LLM –≤—ã–∑–æ–≤–æ–≤  
‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞** - —á—ë—Ç–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π  
‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å  

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:** 
> "–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è ‚Äî —ç—Ç–æ –∫—Ä–∞–π–Ω—è—è –º–µ—Ä–∞, –Ω–µ –ø—Ä–∞–≤–∏–ª–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!"

**–§–∏–ª–æ—Å–æ—Ñ–∏—è DecisionAgent:**
> "Default to NO ‚Äî breakdown is expensive!"

---

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/app/api/supervisor/agent.ts` (–¥–æ–±–∞–≤–ª–µ–Ω—ã decisionAgent –∏ executorAgent)
- `src/app/api/supervisor/unified/intelligentSupervisor.ts` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤)
- `docs/changeReports/AGENT_SEPARATION_V2.md` (—ç—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

