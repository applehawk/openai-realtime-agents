# Testing Guide: Real-time Progress Tracking

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
npm run dev
```

–û—Ç–∫—Ä—ã—Ç—å: http://localhost:3000

### 2. –í—ã–±–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è

–í dropdown (–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª):
- –í—ã–±—Ä–∞—Ç—å: **"Severstal Assistant"**

### 3. –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### –ü—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞ (direct strategy):
```
"–ü–æ–∫–∞–∂–∏ –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞"
```

–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:
- 0% ‚Üí 20% ‚Üí 30% ‚Üí 40% ‚Üí 90% ‚Üí 100%
- ~3-5 —Å–µ–∫—É–Ω–¥

#### –°—Ä–µ–¥–Ω—è—è –∑–∞–¥–∞—á–∞ (flat strategy):
```
"–ü—Ä–æ—á–∏—Ç–∞–π –ø–∏—Å—å–º–æ –æ—Ç –ê–Ω–Ω—ã –∏ –Ω–∞–∑–Ω–∞—á—å –≤—Å—Ç—Ä–µ—á—É"
```

–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:
- 0% ‚Üí 10% ‚Üí 20% ‚Üí 30% ‚Üí 40% ‚Üí 90% ‚Üí 100%
- ~5-8 —Å–µ–∫—É–Ω–¥
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 3-5 workflow steps

#### –°–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞ (hierarchical strategy):
```
"–ù–∞–π–¥–∏ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –í–æ—Å—Ç–æ–∫ –∏ –æ—Ç–ø—Ä–∞–≤—å –∏–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –Ω–∞ –≤—Å—Ç—Ä–µ—á—É"
```

–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å:
- 0% ‚Üí 10% ‚Üí 20% ‚Üí 30% ‚Üí 40% ‚Üí ... ‚Üí 90% ‚Üí 100%
- ~10-15 —Å–µ–∫—É–Ω–¥
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å

### ‚úÖ TaskProgressIndicator –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ì–¥–µ:** –í–≤–µ—Ä—Ö—É transcript –ø–∞–Ω–µ–ª–∏ (–ª–µ–≤–∞—è –ø–∞–Ω–µ–ª—å)

**–ö–æ–≥–¥–∞:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ delegateToIntelligentSupervisor

**–í–Ω–µ—à–Ω–∏–π –≤–∏–¥:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úì –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞              üü¢ Connected       ‚îÇ
‚îÇ ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì 100%              ‚îÇ
‚îÇ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ                            ‚îÇ
‚îÇ –ü—Ä–æ–≥—Ä–µ—Å—Å: 100%                                      ‚îÇ
‚îÇ > –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ (7 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‚úÖ Progress bar –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

- –ù–∞—á–∞–ª–æ: –ø—É—Å—Ç–∞—è (0%)
- –ü—Ä–æ—Ü–µ—Å—Å: –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (—Å–∏–Ω—è—è)
- –ó–∞–≤–µ—Ä—à–µ–Ω–æ: –ø–æ–ª–Ω–∞—è (100%, –∑–µ–ª—ë–Ω–∞—è)
- –û—à–∏–±–∫–∞: –∫—Ä–∞—Å–Ω–∞—è

### ‚úÖ Messages –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ real-time

–ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π:
- "–ù–∞—á–∏–Ω–∞—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏..."
- "–û—Ü–µ–Ω–∏–≤–∞—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏..."
- "–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞: medium"
- "–°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–±—Ä–∞–Ω–∞: flat"
- "–í—ã–ø–æ–ª–Ω—è—é –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—É—é –∑–∞–¥–∞—á—É..."
- "–ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ (5 —à–∞–≥–æ–≤)"
- "–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"

### ‚úÖ Connection status —Ä–∞–±–æ—Ç–∞–µ—Ç

- üü¢ **Connected** - –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- üî¥ **Disconnected** - –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ

### ‚úÖ Collapsible details

–ù–∞–∂–∞—Ç—å "–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ (N –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)":
- –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö progress updates
- –ö–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
  - Timestamp (HH:MM:SS)
  - Event type (started, completed, etc.)
  - Message
  - Details (JSON, collapsible)

---

## Debugging

### Browser DevTools

#### Console

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
[TranscriptContext] Auto-detected sessionId: session-1234567890-abc
[TaskProgressIndicator] Connecting to SSE stream for session: session-xxx
[TaskProgressIndicator] SSE connection opened
[TaskProgressIndicator] Update received: { type: 'started', progress: 0, ... }
[TaskProgressIndicator] Update received: { type: 'completed', progress: 100, ... }
[TaskProgressIndicator] Closing SSE connection
```

#### Network

Tab: **EventStream** –∏–ª–∏ **WS**
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å: `/api/supervisor/unified/stream?sessionId=session-xxx`
- Type: `eventsource`
- Status: `200` (pending –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- Messages: –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ real-time

### Server Logs

Terminal –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`:
```
[API /api/supervisor/unified] Request received: { sessionId: 'session-xxx', ... }
[IntelligentSupervisor] Starting execution: ...
[ProgressEmitter] Session session-xxx: started - –ù–∞—á–∏–Ω–∞—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ... (0%)
[ProgressEmitter] Session session-xxx: complexity_assessed - –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞... (20%)
...
[ProgressEmitter] Session session-xxx: completed - –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞... (100%)
[ProgressEmitter] Cleaned up session session-xxx
[SSE Stream] Stream closed for session: session-xxx
```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### TaskProgressIndicator –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
1. sessionId –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω
2. Breadcrumb –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç sessionId
3. TranscriptContext –Ω–µ –∏–∑–≤–ª—ë–∫ sessionId

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```javascript
// Browser console:
console.log('[Check] Breadcrumbs:', transcriptItems.filter(i => i.type === 'BREADCRUMB'));
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å breadcrumb:
```json
{
  "title": "[Intelligent Supervisor] SSE –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–æ—Å—Ç—É–ø–µ–Ω",
  "data": {
    "sessionId": "session-xxx",
    "streamUrl": "/api/supervisor/unified/stream?sessionId=session-xxx"
  }
}
```

### Progress bar –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
1. SSE connection failed
2. IntelligentSupervisor –Ω–µ —ç–º–∏—Ç–∏—Ç events

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- DevTools ‚Üí Network ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å SSE connection
- Server logs ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `[ProgressEmitter]` –ª–æ–≥–æ–≤

### Connection status –≤—Å–µ–≥–¥–∞ üî¥

**–ü—Ä–∏—á–∏–Ω—ã:**
1. EventSource –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è
2. CORS issues
3. SSE endpoint –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# Test SSE endpoint manually:
curl -N http://localhost:3000/api/supervisor/unified/stream?sessionId=test-session
```

–î–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å SSE messages:
```
data: {"type":"connected","message":"Connected to progress stream",...}

: keep-alive

: keep-alive
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å build

```bash
npm run build
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TypeScript

```bash
npx tsc --noEmit
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å linting

```bash
npm run lint
```

---

## Feedback

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

### –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏?

- [ ] TaskProgressIndicator –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] Progress bar –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ real-time
- [ ] Messages –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ
- [ ] Connection status —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Collapsible details —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
- [ ] Component –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å?

- –í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω (—Ü–≤–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä—ã, —à—Ä–∏—Ñ—Ç—ã)
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ (sticky, fixed, inline)
- –ê–Ω–∏–º–∞—Ü–∏–∏ (fade in/out, progress bar)
- –°–æ–æ–±—â–µ–Ω–∏—è (–±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ, –∫–æ—Ä–æ—á–µ, –¥–ª–∏–Ω–Ω–µ–µ)
- –î–µ—Ç–∞–ª–∏ (—Ñ–æ—Ä–º–∞—Ç, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –ù–∞—à–ª–∏ bug?

1. –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
2. –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
3. –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
4. –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
5. Browser console logs
6. Server logs
7. Screenshots (–µ—Å–ª–∏ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞)

---

*Guide —Å–æ–∑–¥–∞–Ω: 2025-10-23*
